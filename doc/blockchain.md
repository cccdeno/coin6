# blockchain

* [從0開始架構區塊鏈](https://ithelp.ithome.com.tw/2020ironman/articles/2255)

* 計算帳戶餘額
    * 除了難度調整，在發起交易當下也必須檢查匯款人的餘額是否足夠，同時也限制不能匯出超過自己帳戶的餘額，而帳戶餘額總共只有三種來源：
    * 區塊獎勵：挖出區塊的礦工能得到區塊的獎勵
    * 手續費收入：挖出區塊的礦工能得到該比區塊內所有交易的手續費
    * 匯款收入：收到別人匯款的款項
    * 因此我們寫一個簡單的函式，從第一個區塊的第一筆交易開始檢查，一路檢查到最後一筆後便可以得到該帳戶的餘額。

* http://www.qukuai.top/d/370

比特币地址的生成过程
（说明: 有些数字以”0x”开头，意思是此数字使用十六进制表示法。”0x”本身没有任何含义，它是C语言流传下来的，约定俗成的写法，比如0xA就是十进制的10。另外，1个字节 = 8位二进制 = 2位十六进制）。
第一步，随机选取一个32字节的数、大小介于1 ~ 0xFFFF FFFF FFFF FFFF FFFF FFFF FFFF FFFE BAAE DCE6 AF48 A03B BFD2 5E8C D036 4141之间，作为私钥。

18E14A7B6A307F426A94F8114701E7C8E774E7F9A47E2C2035DB29A206321725
第二步，使用椭圆曲线加密算法（ECDSA-secp256k1）计算私钥所对应的非压缩公钥。 (共65字节， 1字节 0×04, 32字节为x坐标，32字节为y坐标）关于公钥压缩、非压缩的问题另文说明。

0450863AD64A87AE8A2FE83C1AF1A8403CB53F53E486D8511DAD8A04887E5B
23522CD470243453A299FA9E77237716103ABC11A1DF38855ED6F2EE187E9C582BA6
第三步，计算公钥的 SHA-256 哈希值

600FFE422B4E00731A59557A5CCA46CC183944191006324A447BDB2D98D4B408
第四步，取上一步结果，计算 RIPEMD-160 哈希值

010966776006953D5567439E5E39F86A0D273BEE
第五步，取上一步结果，前面加入地址版本号（比特币主网版本号“0×00”）

00010966776006953D5567439E5E39F86A0D273BEE
第六步，取上一步结果，计算 SHA-256 哈希值

445C7A8007A93D8733188288BB320A8FE2DEBD2AE1B47F0F50BC10BAE845C094
第七步，取上一步结果，再计算一下 SHA-256 哈希值（哈哈）

D61967F63C7DD183914A4AE452C9F6AD5D462CE3D277798075B107615C1A8A30
第八步，取上一步结果的前4个字节（8位十六进制）

D61967F6
第九步，把这4个字节加在第五步的结果后面，作为校验（这就是比特币地址的16进制形态）。

00010966776006953D5567439E5E39F86A0D273BEED61967F6
第十步，用base58表示法变换一下地址（这就是最常见的比特币地址形态）。

16UwLL9Risc3QfPqBUvKofHmBQ7wMtjvM